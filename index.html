<!DOCTYPE html>
<html>
<head>
    <title>Famous Paintings Comparison</title>
    <meta charset="UTF-8">
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            text-align: center;
            background-color: #f5f5f5;
        }
        
        .comparison-container {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            gap: 20px;
        }
        
        .image-container {
            text-align: center;
            width: 45%;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .image-container img {
            width: 100%;
            height: 400px;
            object-fit: contain;
            margin-bottom: 10px;
            border-radius: 5px;
        }
        
        .artwork-info {
            margin: 15px 0;
            font-size: 14px;
            min-height: 80px;
        }
        
        .artwork-title {
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 5px;
        }
        
        .artwork-artist {
            font-style: italic;
            color: #666;
            margin-bottom: 5px;
        }
        
        .artwork-year {
            color: #888;
        }
        
        button {
            padding: 12px 24px;
            font-size: 16px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #45a049;
        }

        .stats {
            margin-top: 20px;
            padding: 15px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .dont-know {
            margin-top: 20px;
        }

        .dont-know button {
            background-color: #888;
        }

        .dont-know button:hover {
            background-color: #666;
        }

        #progress-bar {
            width: 100%;
            background-color: #ddd;
            height: 20px;
            border-radius: 10px;
            margin-top: 10px;
            overflow: hidden;
        }

        #progress-fill {
            height: 100%;
            background-color: #4CAF50;
            width: 0%;
            transition: width 0.3s;
        }

        .rankings-section {
            margin-top: 30px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .rankings-grid {
            display: grid;
            grid-template-columns: auto 1fr;
            gap: 10px;
            text-align: left;
            margin-top: 15px;
        }

        .rank-item {
            display: contents;
        }

        .rank-number {
            font-weight: bold;
            color: #666;
            padding: 5px 10px;
        }

        .rank-info {
            padding: 5px 0;
        }

        .stability-metrics {
    margin-top: 20px;
    padding-top: 15px;
    border-top: 1px solid #eee;
}

.stability-metrics h3 {
    margin: 0 0 15px 0;
    color: #444;
}

.metrics-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
    text-align: left;
}

.metric {
    background: #f8f8f8;
    padding: 10px;
    border-radius: 5px;
}

.metric-label {
    font-size: 14px;
    color: #666;
    margin-bottom: 5px;
}

.metric-value {
    font-size: 18px;
    font-weight: bold;
    color: #333;
}
    </style>
</head>
<body>
    <h1>Which painting do you prefer?</h1>
    
    <div class="comparison-container" id="comparison">
        <div class="image-container">
            <img id="left-image" src="" alt="Left Painting">
            <div class="artwork-info">
                <div class="artwork-title" id="left-title"></div>
                <div class="artwork-artist" id="left-artist"></div>
                <div class="artwork-year" id="left-year"></div>
            </div>
            <button onclick="selectImage('left')">Select Left Painting</button>
        </div>
        
        <div class="image-container">
            <img id="right-image" src="" alt="Right Painting">
            <div class="artwork-info">
                <div class="artwork-title" id="right-title"></div>
                <div class="artwork-artist" id="right-artist"></div>
                <div class="artwork-year" id="right-year"></div>
            </div>
            <button onclick="selectImage('right')">Select Right Painting</button>
        </div>
    </div>

    <div class="dont-know">
        <button onclick="dontKnow()">Don't know either painting</button>
    </div>

    <div class="stats">
    <div>Comparisons made: <span id="comparison-count">0</span></div>
    <div>Progress:</div>
    <div id="progress-bar">
        <div id="progress-fill"></div>
    </div>
    <div class="stability-metrics">
        <h3>Ranking Stability Metrics</h3>
        <div class="metrics-grid">
            <div class="metric">
                <div class="metric-label">Average Movement</div>
                <div class="metric-value" id="avg-movement">-</div>
            </div>
            <div class="metric">
                <div class="metric-label">Max Position Change</div>
                <div class="metric-value" id="max-movement">-</div>
            </div>
            <div class="metric">
                <div class="metric-label">Big Movers (>5%)</div>
                <div class="metric-value" id="big-movers">-</div>
            </div>
            <div class="metric">
                <div class="metric-label">Top 10 Stability</div>
                <div class="metric-value" id="top-stability">-</div>
            </div>
        </div>
    </div>
</div>

    <div class="rankings-section">
        <h2>Current Rankings</h2>
        <div id="rankings-list" class="rankings-grid">
            <!-- Rankings will be inserted here -->
        </div>
    </div>

    <script>
        const paintings = [
            {
                id: "1",
                title: "Mona Lisa",
                artist: "Leonardo da Vinci",
                year: "1503-1519",
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/e/ec/Mona_Lisa%2C_by_Leonardo_da_Vinci%2C_from_C2RMF_retouched.jpg/687px-Mona_Lisa%2C_by_Leonardo_da_Vinci%2C_from_C2RMF_retouched.jpg"
            },
            {
                id: "2",
                title: "The Starry Night",
                artist: "Vincent van Gogh",
                year: "1889",
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/e/ea/Van_Gogh_-_Starry_Night_-_Google_Art_Project.jpg/1280px-Van_Gogh_-_Starry_Night_-_Google_Art_Project.jpg"
            },
            {
                id: "3",
                title: "Girl with a Pearl Earring",
                artist: "Johannes Vermeer",
                year: "1665",
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/0/0f/1665_Girl_with_a_Pearl_Earring.jpg/800px-1665_Girl_with_a_Pearl_Earring.jpg"
            },
            {
                id: "4",
                title: "The Birth of Venus",
                artist: "Sandro Botticelli",
                year: "1485",
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/0/0b/Sandro_Botticelli_-_La_nascita_di_Venere_-_Google_Art_Project_-_edited.jpg/2560px-Sandro_Botticelli_-_La_nascita_di_Venere_-_Google_Art_Project_-_edited.jpg"
            },
            {
                id: "5",
                title: "The Last Supper",
                artist: "Leonardo da Vinci",
                year: "1495-1498",
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/4/4b/%C3%9Altima_Cena_-_Da_Vinci_5.jpg/2560px-%C3%9Altima_Cena_-_Da_Vinci_5.jpg"
            },
            {
                id: "6",
                title: "The Scream",
                artist: "Edvard Munch",
                year: "1893",
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c5/Edvard_Munch%2C_1893%2C_The_Scream%2C_oil%2C_tempera_and_pastel_on_cardboard%2C_91_x_73_cm%2C_National_Gallery_of_Norway.jpg/1280px-Edvard_Munch%2C_1893%2C_The_Scream%2C_oil%2C_tempera_and_pastel_on_cardboard%2C_91_x_73_cm%2C_National_Gallery_of_Norway.jpg"
            },
            {
                id: "7",
                title: "The Night Watch",
                artist: "Rembrandt",
                year: "1642",
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5a/The_Night_Watch_-_HD.jpg/1920px-The_Night_Watch_-_HD.jpg"
            },
            {
                id: "8",
                title: "The Kiss",
                artist: "Gustav Klimt",
                year: "1907-1908",
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/4/40/The_Kiss_-_Gustav_Klimt_-_Google_Cultural_Institute.jpg/1280px-The_Kiss_-_Gustav_Klimt_-_Google_Cultural_Institute.jpg"
            },
            {
                id: "9",
                title: "The Persistence of Memory",
                artist: "Salvador Dalí",
                year: "1931",
                image: "https://upload.wikimedia.org/wikipedia/en/d/dd/The_Persistence_of_Memory.jpg"
            },
            {
                id: "10",
                title: "The Creation of Adam",
                artist: "Michelangelo",
                year: "1508-1512",
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5b/Michelangelo_-_Creation_of_Adam_%28cropped%29.jpg/2560px-Michelangelo_-_Creation_of_Adam_%28cropped%29.jpg"
            },
            {
                id: "11",
                title: "The Great Wave off Kanagawa",
                artist: "Hokusai",
                year: "1829-1833",
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/a/a5/Tsunami_by_hokusai_19th_century.jpg/2560px-Tsunami_by_hokusai_19th_century.jpg"
            },
            {
                id: "12",
                title: "Las Meninas",
                artist: "Diego Velázquez",
                year: "1656",
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/3/31/Las_Meninas%2C_by_Diego_Vel%C3%A1zquez%2C_from_Prado_in_Google_Earth.jpg/1280px-Las_Meninas%2C_by_Diego_Vel%C3%A1zquez%2C_from_Prado_in_Google_Earth.jpg"
            },
            {
                id: "13",
                title: "American Gothic",
                artist: "Grant Wood",
                year: "1930",
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/c/cc/Grant_Wood_-_American_Gothic_-_Google_Art_Project.jpg/1280px-Grant_Wood_-_American_Gothic_-_Google_Art_Project.jpg"
            },
            {
                id: "14",
                title: "The School of Athens",
                artist: "Raphael",
                year: "1509-1511",
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/4/49/%22The_School_of_Athens%22_by_Raffaello_Sanzio_da_Urbino.jpg/2560px-%22The_School_of_Athens%22_by_Raffaello_Sanzio_da_Urbino.jpg"
            },
            {
                id: "15",
                title: "The Son of Man",
                artist: "René Magritte",
                year: "1964",
                image: "https://upload.wikimedia.org/wikipedia/en/e/e5/Magritte_TheSonOfMan.jpg"
            }
        ].map(painting => ({
            ...painting,
            elo: 1400,
            wins: 0,
            matches: 0
        }));

        let comparisonCount = 0;
        let currentPair = [];
        let comparisons = [];
        const TOTAL_NEEDED = 120;
        const K_FACTOR = 32;

        function initialize() {
            loadNewComparison();
            updateStats();
            updateRankings();
        }

        function loadNewComparison() {
            const available = paintings.filter(p => !currentPair.includes(p));
            if (available.length < 2) {
                alert("No more unique pairs available!");
                return;
            }

            currentPair = [];
            const idx1 = Math.floor(Math.random() * available.length);
            currentPair.push(available[idx1]);
            available.splice(idx1, 1);
            const idx2 = Math.floor(Math.random() * available.length);
            currentPair.push(available[idx2]);

            document.getElementById('left-image').src = currentPair[0].image;
            document.getElementById('left-title').textContent = currentPair[0].title;
            document.getElementById('left-artist').textContent = currentPair[0].artist;
            document.getElementById('left-year').textContent = currentPair[0].year;

            document.getElementById('right-image').src = currentPair[1].image;
            document.getElementById('right-title').textContent = currentPair[1].title;
            document.getElementById('right-artist').textContent = currentPair[1].artist;
            document.getElementById('right-year').textContent = currentPair[1].year;
        }

        function updateEloRatings(winner, loser) {
            const expectedWinner = 1 / (1 + Math.pow(10, (loser.elo - winner.elo) / 400));
            const expectedLoser = 1 / (1 + Math.pow(10, (winner.elo - loser.elo) / 400));

            winner.elo += K_FACTOR * (1 - expectedWinner);
            loser.elo += K_FACTOR * (0 - expectedLoser);

            winner.matches++;
            loser.matches++;
            winner.wins++;
        }

        function selectImage(side) {
            if (currentPair.length !== 2) return;

            const winner = side === 'left' ? currentPair[0] : currentPair[1];
            const loser = side === 'left' ? currentPair[1] : currentPair[0];

            updateEloRatings(winner, loser);

            comparisons.push({
                winner: winner.id,
                loser: loser.id,
                timestamp: Date.now(),
                type: 'preference'
            });

            comparisonCount++;
            updateStats();
            updateRankings();
            loadNewComparison();
        }

        function dontKnow() {
            if (currentPair.length !== 2) return;

            comparisons.push({
                painting1: currentPair[0].id,
                painting2: currentPair[1].id,
                timestamp: Date.now(),
                type: 'unknown'
            });

            loadNewComparison();
        }

        function updateRankings() {
            const rankedPaintings = [...paintings].sort((a, b) => b.elo - a.elo);
            const rankingsList = document.getElementById('rankings-list');
            rankingsList.innerHTML = rankedPaintings.map((painting, index) => `
                <div class="rank-item">
                    <div class="rank-number">${index + 1}</div>
                    <div class="rank-info">
                        ${painting.title} (${painting.artist})
                    </div>
                </div>
            `).join('');
        }

        function updateStats() {
            document.getElementById('comparison-count').textContent = comparisonCount;
            const progress = (comparisonCount / TOTAL_NEEDED) * 100;
            document.getElementById('progress-fill').style.width = `${Math.min(100, progress)}%`;
            
            const saveState = {
                comparisons,
                comparisonCount,
                paintings
            };
            localStorage.setItem('artComparisons', JSON.stringify(saveState));
        }

        const savedState = localStorage.getItem('artComparisons');
        if (savedState) {
            const state = JSON.parse(savedState);
            comparisons = state.comparisons;
            comparisonCount = state.comparisonCount;
            
            state.paintings.forEach((savedPainting) => {
                const painting = paintings.find(p => p.id === savedPainting.id);
                if (painting) {
                    painting.elo = savedPainting.elo;
                    painting.wins = savedPainting.wins;
                    painting.matches = savedPainting.matches;
                }
            });
            updateStats();
            updateRankings();
        }

        // Start the application
        initialize();
    </script>
</body>
</html>
